

	
		    
		<meta charset="UTF-8">
		    
		<meta name="viewport" content="width:device-width, initial-scale=1.0">
		    <title>📦 إدخال الطلبات</title>    
		<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600&amp;display=swap" rel="stylesheet">
		    
		
	
	
		    
		<h2>
			📦 إدخال الطلبات
		</h2>
		    
		<div id="adminCodeContainer">
			        
			<label for="adminCode">
				ادخل رمز لوحة التحكم:
			</label>
			        
			<input type="password" id="adminCode" placeholder="الرمز">
			        
			<button onclick="verifyCode()">
				دخول
			</button>
			    
		</div>
		    
		<div id="productListContainer">
			        
			<input type="text" id="searchInput" onkeyup="searchDropdown()" placeholder="🔍 البحث عن منتج...">
			        
			<div id="productList"></div>
			    
		</div>
		    
		<table id="orderTable">
			        
			<thead>
				            
				<tr>
					                
					<th>
						📦 المنتج
					</th>
					                
					<th>
						📊 العدد
					</th>
					                
					<th>
						🗑️ حذف
					</th>
					            
				</tr>
				        
			</thead>
			        
			<tbody></tbody>
			    
		</table>
		    
		<div class="buttonContainer">
			        
			<button onclick="sendOrder()">
				📩 إرسال الطلب عبر واتساب
			</button>
			        
			<button onclick="clearOrder()">
				🗑️ تفريغ الطلب
			</button>
			        
			<button onclick="printOrder()">
				🖨️ طباعة الطلب
			</button>
			    
		</div>
		    
		<div id="adminPanel" style="display: none;">
			        
			<h3>
				لوحة تحكم المسؤول
			</h3>
			        
			<input type="text" id="newProductName" placeholder="اسم المنتج">
			        
			<input type="number" id="newProductPrice" placeholder="السعر">
			        
			<button onclick="addProduct()">
				إضافة منتج
			</button>
			    
		</div>
		    
		<script>
			        const adminPassword = "5050";        let products = [            { name: "ن A.104", price: 25 },            { name: "ن A.112", price: 30 },            { name: "ن A.113", price: 20 },            { name: "ن B.103", price: 15 },            { name: "ن B.104", price: 40 },            { name: "ر A.102", price: 18 },            { name: "ر A.104", price: 22 }        ];        let orderItems = [];        const taxRate = 0.18;        let editingProduct = null;        function verifyCode() {            const code = document.getElementById("adminCode").value;            if (code === adminPassword) {                document.getElementById("adminPanel").style.display = "block";                alert("تم الدخول بنجاح!");                searchDropdown();            } else {                alert("رمز غير صحيح!");            }        }        function searchDropdown() {            const searchInput = document.getElementById("searchInput").value.toLowerCase();            const productList = document.getElementById("productList");            productList.innerHTML = "";            products.forEach(product => {                if (product.name.toLowerCase().includes(searchInput)) {                    const div = document.createElement('div');                    div.innerHTML = `                        <span>${product.name}</span>                        
			<button onclick='addToOrder("${product.name}", ${product.price})'>
				إضافة
			</button>
			                        
			<button onclick='editProduct("${product.name}")'>
				تعديل
			</button>
			                    `;                    productList.appendChild(div);                }            });        }        function addToOrder(name, price) {            const existingItem = orderItems.find(item => item.name === name);            if (existingItem) {                existingItem.quantity += 1;            } else {                orderItems.push({ name: name, price: price, quantity: 1 });            }            updateOrderTable();            searchDropdown();        }        function updateOrderTable() {            const tableBody = document.querySelector("#orderTable tbody");            tableBody.innerHTML = "";            orderItems.forEach((item, index) => {                const row = tableBody.insertRow();                const nameCell = row.insertCell(0);                const quantityCell = row.insertCell(1);                const priceCell = row.insertCell(2);                const deleteCell = row.insertCell(2);                nameCell.textContent = item.name;                quantityCell.innerHTML = `
			<input type="number" value="${item.quantity}" min="1" onchange="updateQuantity(${index}, this.value)">
			`;                priceCell.textContent = "";                deleteCell.innerHTML = `
			<button onclick="deleteOrderItem(${index})">
				🗑️
			</button>
			`;            });        }        function updateQuantity(index, quantity) {            quantity = parseInt(quantity);            if (quantity > 0) {                orderItems[index].quantity = quantity;            } else {                orderItems[index].quantity = 1;            }            updateOrderTable();        }        function deleteOrderItem(index) {            orderItems.splice(index, 1);            updateOrderTable();        }        function sendOrder() {            if (orderItems.length === 0) {                alert("الرجاء إضافة منتجات إلى الطلب!");                return;            }            let message = "قائمة الطلبات:\n";            let totalPrice = 0;            orderItems.forEach(item => {                if (document.getElementById("adminPanel").style.display === "block") {                  const itemPrice = (item.price * item.quantity).toFixed(2);                   message += `- ${item.name}، العدد: ${item.quantity} السعر: ${itemPrice}\n`;                   totalPrice += parseFloat(itemPrice);                } else {                message += `- ${item.name}، العدد: ${item.quantity}\n`;                }            });            if (document.getElementById("adminPanel").style.display === "block"){              const taxAmount = (totalPrice * taxRate).toFixed(2);              const finalPrice = (totalPrice + parseFloat(taxAmount)).toFixed(2);              message += `\nالضريبة (18%): ${taxAmount}₪`;              message += `\nالسعر الإجمالي: ${finalPrice}₪`;            }            const encodedMessage = encodeURIComponent(message);            const whatsappUrl = `https://wa.me/?text=${encodedMessage}`;            window.open(whatsappUrl, '_blank');        }        function addProduct() {            const newProductName = document.getElementById("newProductName").value;            const newProductPrice = parseFloat(document.getElementById("newProductPrice").value);            if (newProductName && !isNaN(newProductPrice) && newProductPrice > 0) {                if (editingProduct) {                    const index = products.findIndex(p => p.name === editingProduct);                    if (index !== -1) {                        products[index].name = newProductName;                        products[index].price = newProductPrice;                    }                    editingProduct = null;                    alert("تم تعديل المنتج بنجاح!");                } else {                    products.push({ name: newProductName, price: newProductPrice });                    alert("تم إضافة المنتج بنجاح!");                }                searchDropdown();                document.getElementById("newProductName").value = "";                document.getElementById("newProductPrice").value = "";            } else {                alert("الرجاء إدخال اسم صحيح وسعر أكبر من صفر!");            }        }        function clearOrder() {            orderItems = [];            updateOrderTable();            alert("تم تفريغ الطلب!");        }        function printOrder() {            if (orderItems.length === 0) {                alert("الرجاء إضافة منتجات إلى الطلب!");                return;            }            let printContent = `                
			<div style="font-family: 'Cairo', sans-serif; text-align: center; padding: 20px;">
				                    
				<h2 style="color: #00897b; margin-bottom: 10px;">
					📦 طلب المنتجات
				</h2>
				                    
				<table style="width: 100%; border-collapse: collapse; margin-bottom: 20px; margin: auto;">
					                        
					<thead style="background-color: #c5e1a5;">
						                            
						<tr>
							                                
							<th style="border: 1px solid #ddd; padding: 12px; text-align: center; font-size: 18px;">
								المنتج
							</th>
							                                
							<th style="border: 1px solid #ddd; padding: 12px; text-align: center; font-size: 18px;">
								العدد
							</th>
							                                ${document.getElementById("adminPanel").style.display === "block" ? `
							<th style="border: 1px solid #ddd; padding: 12px; text-align: center; font-size: 18px;">
								السعر
							</th>
							` : ``}                            
						</tr>
						                        
					</thead>
					                        
					<tbody>
						            `;            let totalPrice = 0;            orderItems.forEach(item => {                const itemPrice = (item.price * item.quantity).toFixed(2);                printContent += `                                    
						<tr>
							                                        
							<td style="border: 1px solid #ddd; padding: 12px; text-align: center; font-size: 16px;">
								${item.name}
							</td>
							                                        
							<td style="border: 1px solid #ddd; padding: 12px; text-align: center; font-size: 16px;">
								${item.quantity}
							</td>
							                                        ${document.getElementById("adminPanel").style.display === "block" ? `
							<td style="border: 1px solid #ddd; padding: 12px; text-align: center; font-size: 16px;">
								${itemPrice}
							</td>
							` : ``}                                    
						</tr>
						                `;                totalPrice += parseFloat(itemPrice);            });            if (document.getElementById("adminPanel").style.display === "block") {              const taxAmount = (totalPrice * taxRate).toFixed(2);              const finalPrice = (totalPrice + parseFloat(taxAmount)).toFixed(2);                printContent += `                        
					</tbody>
					                        
					<tfoot style="background-color: #f0f4c3;">
						                            
						<tr>
							                                
							<td colspan="${document.getElementById("adminPanel").style.display === "block" ? `3` : `2`}" style="border: 1px solid #ddd; padding: 12px; text-align: center; font-size: 18px; font-weight: bold;">
								السعر الإجمالي:
							</td>
							                                
							<td style="border: 1px solid #ddd; padding: 12px; text-align: center; font-size: 18px; font-weight: bold;">
								${finalPrice}₪
							</td>
							                            
						</tr>
						                        
					</tfoot>
					                    
				</table>
				                    
				<p style="font-size: 16px;">
					شكراً لطلبكم!
				</p>
				                
			</div>
			                `;                } else {                     printContent += `                        
		</tbody>
		                    
	</table>
	                    
	<p style="font-size: 16px;">
		شكراً لطلبكم!
	</p>
	                
</div>
                `;                }            const printWindow = window.open('', '', 'height=400,width=800');            printWindow.document.write('
<html>
	<head>
		<title>طباعة الطلب</title>
		');            printWindow.document.write('
		<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600&display=swap" rel="stylesheet">
		');            printWindow.document.write('
		<style>
			');            printWindow.document.write('body { font-family: "Cairo", sans-serif; text-align: right; }');            printWindow.document.write('table { width: 100%; border-collapse: collapse; margin-bottom: 20px; margin: auto; }');            printWindow.document.write('th, td { border: 1px solid #ddd; padding: 12px; text-align: center; }');            printWindow.document.write('th { background-color: #c5e1a5; color: #000; }');            printWindow.document.write('
		</style>
		');            printWindow.document.write('
	</head>
	<body>
		');            printWindow.document.write(printContent);            printWindow.document.write('
	</body>
</html>
');            printWindow.document.close();            printWindow.focus();            printWindow.print();            printWindow.close();        }        function editProduct(name) {            editingProduct = name;            const productToEdit = products.find(p => p.name === name);            if (productToEdit) {                document.getElementById("newProductName").value = productToEdit.name;                document.getElementById("newProductPrice").value = productToEdit.price;                document.getElementById("adminPanel").style.display = "block";            }        }        searchDropdown();    
</script>

